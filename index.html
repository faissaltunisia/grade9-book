<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ØµØ© ØªÙÙ‚Ù†ÙŠ | Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.11.0/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.11.0/brython_stdlib.min.js"></script>

    <style>
        :root { --primary: #4f46e5; --bg: #f8fafc; --text: #1e293b; --success: #059669; }
        * { box-sizing: border-box; font-family: 'Tajawal', sans-serif; }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); overflow: hidden; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ù…Ù†Ù‡Ø¬ */
        .curriculum-tabs {
            display: flex; background: white; border-bottom: 2px solid #e2e8f0; height: 50px;
        }
        .tab-item {
            flex: 1; display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 0.9rem; color: #64748b; cursor: pointer;
        }
        .tab-item.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: #f5f3ff; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (ØªÙÙ‚Ù†ÙŠ) */
        .ai-guide-bar {
            background: #ffffff; margin: 10px; padding: 12px 15px; border-radius: 12px;
            display: flex; align-items: center; gap: 12px; border-right: 5px solid var(--primary);
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); transition: 0.3s;
        }
        .ai-eye { width: 12px; height: 12px; background: var(--primary); border-radius: 50%; box-shadow: 0 0 10px var(--primary); }
        .ai-message { font-size: 0.85rem; font-weight: 700; color: var(--text); flex: 1; }

        /* Ø§Ù„Ù…Ø­Ø±Ø± */
        .editor-box {
            flex: 1; margin: 0 10px; background: #1e293b; border-radius: 15px;
            overflow: hidden; display: flex; flex-direction: column; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }
        #editor {
            flex: 1; width: 100%; background: transparent; color: #e2e8f0;
            padding: 15px; font-family: 'Consolas', monospace; font-size: 1.1rem;
            border: none; outline: none; resize: none; line-height: 1.6;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª */
        #console {
            height: 0; background: #000; color: #10b981; transition: 0.3s;
            overflow-y: auto; font-family: monospace; font-size: 0.9rem;
        }
        #console.active { height: 100px; padding: 10px 15px; border-top: 2px solid #334155; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³ÙÙ„ÙŠ */
        .action-bar {
            padding: 15px; display: flex; gap: 10px; background: white; border-top: 1px solid #e2e8f0;
        }
        .btn-main {
            flex: 2; padding: 12px; border: none; border-radius: 10px;
            font-weight: 900; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-run { background: var(--success); color: white; box-shadow: 0 4px 10px rgba(5, 150, 105, 0.3); }
        .btn-clear { flex: 1; background: #f1f5f9; color: #ef4444; border: 1px solid #e2e8f0; }

        /* Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø£Ù†Ø´Ø·Ø© ÙˆØ§Ù„ÙƒØªØ§Ø¨ */
        .full-screen-overlay {
            position: fixed; inset: 0; background: white; z-index: 2000;
            display: none; flex-direction: column; padding: 20px; overflow-y: auto;
        }
    </style>
</head>
<body onload="brython()">

    <div style="height: 100vh; display: flex; flex-direction: column;">
        <nav class="curriculum-tabs">
            <div class="tab-item active" onclick="switchMainTab('lab')"><i class="fas fa-flask"></i>&nbsp;Ø§Ù„Ù…Ø®ØªØ¨Ø±</div>
            <div class="tab-item" onclick="switchMainTab('tasks')"><i class="fas fa-edit"></i>&nbsp;Ø§Ù„Ø£Ù†Ø´Ø·Ø©</div>
            <div class="tab-item" onclick="switchMainTab('book')"><i class="fas fa-book-open"></i>&nbsp;Ø§Ù„ÙƒØªØ§Ø¨</div>
        </nav>

        <div class="ai-guide-bar" id="ai-status">
            <div class="ai-eye" id="ai-eye"></div>
            <div class="ai-message" id="ai-text">ØªÙÙ‚Ù†ÙŠ: Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ø£ØªØ§Ø¨Ø¹ ÙƒÙˆØ¯ÙƒØŒ Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ³Ø£Ø±Ø´Ø¯Ùƒ.</div>
            <button onclick="askAiDeep()" style="background:var(--primary); color:white; border:none; border-radius:8px; padding:5px 10px; font-size:0.7rem;">Ø§Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</button>
        </div>

        <div class="editor-box">
            <textarea id="editor" spellcheck="false" oninput="monitorCode()">print("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø§Ø¯Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª")</textarea>
            <div id="console"></div>
        </div>

        <div class="action-bar">
            <button class="btn-main btn-clear" onclick="clearFull()">
                <i class="fas fa-trash"></i> Ù…Ø³Ø­
            </button>
            <button class="btn-main btn-run" onclick="runScript()">
                <i class="fas fa-play-circle"></i> â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
            </button>
        </div>
    </div>

    <div id="screen-tasks" class="full-screen-overlay">
        <header style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
            <i class="fas fa-times" onclick="closeOverlay()" style="font-size:1.5rem;"></i>
        </header>
        <div style="background:#f1f5f9; padding:20px; border-radius:15px; margin-top:20px;">
            <h4>Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ÙˆÙ„: Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³Ù…</h4>
            <p>Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬Ø§Ù‹ ÙŠÙ‚ÙˆÙ… Ø¨Ø·Ø¨Ø§Ø¹Ø© Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© print.</p>
            <button onclick="closeOverlay()" style="background:var(--primary); color:white; border:none; padding:10px; border-radius:8px;">Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</button>
        </div>
    </div>

    <div id="screen-book" class="full-screen-overlay">
        <header style="display:flex; justify-content:space-between; align-items:center;">
            <h2>ÙƒØªØ§Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h2>
            <i class="fas fa-times" onclick="closeOverlay()" style="font-size:1.5rem;"></i>
        </header>
        <div style="margin-top:20px; border: 2px dashed #ccc; height: 400px; display:flex; align-items:center; justify-content:center; color:#999;">
            <p>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ ØµÙØ­Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ (PDF) Ù‡Ù†Ø§</p>
        </div>
    </div>

    <script type="text/python">
        from browser import document, window
        def execute(ev=None):
            document["console"].classList.add("active")
            document["console"].text = ""
            def log(*args): document["console"].text += " ".join(map(str, args)) + "\n"
            try:
                exec(document["editor"].value, {"print": log, "input": window.prompt})
                window.aiSuccess()
            except Exception as e:
                document["console"].text = f"âŒ Ø®Ø·Ø£:\n{str(e)}"
                window.aiError(str(e))
        window.pythonRun = execute
    </script>

    <script>
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function switchMainTab(tab) {
            if(tab === 'tasks') document.getElementById('screen-tasks').style.display = 'flex';
            if(tab === 'book') document.getElementById('screen-book').style.display = 'flex';
        }
        function closeOverlay() {
            document.querySelectorAll('.full-screen-overlay').forEach(o => o.style.display = 'none');
        }

        // Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ "ØªÙÙ‚Ù†ÙŠ"
        function monitorCode() {
            const code = document.getElementById('editor').value;
            const msg = document.getElementById('ai-text');
            const eye = document.getElementById('ai-eye');
            const bar = document.getElementById('ai-status');

            if (code.includes('print') && !code.includes('(')) {
                msg.innerText = "ØªÙÙ‚Ù†ÙŠ: Ø§Ù†ØªØ¨Ù‡! Ø¯Ø§Ù„Ø© print ØªØ­ØªØ§Ø¬ Ø£Ù‚ÙˆØ§Ø³ () Ù„ØªØ¹Ù…Ù„.";
                eye.style.background = "#ef4444";
                bar.style.borderColor = "#ef4444";
            } else if (code.length > 20) {
                msg.innerText = "ØªÙÙ‚Ù†ÙŠ: ÙƒÙˆØ¯ Ø¬Ù…ÙŠÙ„! Ù‡Ù„ Ø¬Ø±Ø¨Øª ØªØ´ØºÙŠÙ„Ù‡ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ";
                eye.style.background = "#4f46e5";
                bar.style.borderColor = "#4f46e5";
            }
        }

        async function askAiDeep() {
            const code = document.getElementById('editor').value;
            const msg = document.getElementById('ai-text');
            msg.innerText = "ØªÙÙ‚Ù†ÙŠ ÙŠÙÙƒØ± ÙÙŠ ÙƒÙˆØ¯Ùƒ... ğŸ¤”";
            
            try {
                const res = await fetch('https://text.pollinations.ai/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        messages: [{role: 'system', content: 'Ø£Ù†Øª ØªÙÙ‚Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø§Ø¯Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø¹Ù…Ø§Ù†ØŒ Ù‚Ø¯Ù… Ù†ØµÙŠØ­Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ø´Ø¬Ø¹Ø©.'}, {role: 'user', content: code}]
                    })
                });
                msg.innerText = "ØªÙÙ‚Ù†ÙŠ: " + await res.text();
            } catch {
                msg.innerText = "ØªÙÙ‚Ù†ÙŠ: Ø£Ù†Ø§ Ù…Ø¹ÙƒØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹!";
            }
        }

        function aiSuccess() {
            document.getElementById('ai-text').innerText = "ØªÙÙ‚Ù†ÙŠ: Ù…Ù…ØªØ§Ø²! Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ØŒ Ø£Ù†Øª Ù…Ø¨Ø±Ù…Ø¬ Ø±Ø§Ø¦Ø¹.";
            document.getElementById('ai-eye').style.background = "#059669";
        }

        function aiError(e) {
            document.getElementById('ai-text').innerText = "ØªÙÙ‚Ù†ÙŠ: Ø­Ø¯Ø« Ø®Ø·Ø£ Ø¨Ø³ÙŠØ·ØŒ Ù„Ø§ ØªÙ‚Ù„Ù‚ØŒ Ø­Ø§ÙˆÙ„ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„.";
            document.getElementById('ai-eye').style.background = "#ef4444";
        }

        function runScript() { window.pythonRun(); }
        function clearFull() { if(confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ØŸ")) document.getElementById('editor').value = ""; }
    </script>
</body>
</html>
