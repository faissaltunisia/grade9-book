<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>منصة تِقني AI | أ. فيصل العريبي</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.11.0/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.11.0/brython_stdlib.min.js"></script>

    <style>
        :root {
            --bg-deep: #0b0f1a;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --text-glow: #22d3ee;
            --glass-bg: rgba(255, 255, 255, 0.03);
        }

        * { box-sizing: border-box; font-family: 'Tajawal', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            margin: 0; padding: 0; height: 100%; width: 100vw; 
            background: var(--bg-deep); color: white; overflow: hidden;
        }

        /* --- خلفية فضاء متحركة --- */
        #bg-canvas { position: fixed; inset: 0; z-index: -1; opacity: 0.5; }

        /* --- شاشة الدخول العصرية --- */
        #splash {
            position: fixed; inset: 0; background: radial-gradient(circle at center, #1e1b4b 0%, #020617 100%);
            z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .splash-robot { font-size: 5rem; color: var(--accent-green); filter: drop-shadow(0 0 15px var(--accent-green)); animation: float 3s infinite ease-in-out; }
        .platform-name { font-size: 3rem; font-weight: 900; margin: 15px 0; letter-spacing: -2px; }
        .designer-tag { color: var(--text-glow); font-size: 1.1rem; margin-bottom: 40px; font-weight: bold; }
        .start-btn {
            background: var(--accent-green); color: white; border: none; padding: 18px 60px;
            border-radius: 40px; font-weight: 900; font-size: 1.3rem; cursor: pointer;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.4);
        }

        /* --- الواجهة الرئيسية (Main UI) --- */
        .app-container { display: flex; flex-direction: column; height: 100vh; opacity: 0; transition: 1s; }
        
        header { 
            padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.05); background: rgba(0,0,0,0.2);
        }
        .logo-text { font-weight: 900; font-size: 1.3rem; display: flex; align-items: center; gap: 8px; }

        /* منطقة الكود والنتائج */
        .workspace { flex: 1; display: flex; flex-direction: column; padding: 12px; gap: 12px; }
        #editor {
            flex: 1.2; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; color: #a5f3fc; padding: 20px; font-family: 'Consolas', monospace;
            font-size: 1.1rem; outline: none; line-height: 1.6;
        }
        #console {
            flex: 0.8; background: rgba(0,0,0,0.8); border-radius: 20px;
            border: 1px solid rgba(16, 185, 129, 0.2); padding: 15px;
            font-family: monospace; color: var(--accent-green); overflow-y: auto;
        }

        /* --- أيقونة المساعد العائمة (Smart Bot) --- */
        #ai-fab {
            position: fixed; bottom: 100px; left: 25px; width: 60px; height: 60px;
            background: linear-gradient(135deg, #4f46e5, #9333ea); border-radius: 20px;
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5); z-index: 1000; cursor: pointer;
        }

        /* القائمة المساعدة (مثل التي في الصورة) */
        #helper-menu {
            position: fixed; bottom: 170px; left: 25px; width: 200px;
            background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(10px);
            border-radius: 20px; padding: 10px; display: none; flex-direction: column;
            gap: 5px; border: 1px solid rgba(255,255,255,0.1); z-index: 1000;
        }
        .menu-item {
            padding: 12px; display: flex; align-items: center; gap: 10px;
            font-size: 0.85rem; cursor: pointer; border-radius: 12px; transition: 0.2s;
        }
        .menu-item:hover { background: rgba(255,255,255,0.05); color: var(--text-glow); }

        /* --- شريط التحكم السفلي (Navigation) --- */
        .nav-bar {
            height: 85px; background: #0f172a; display: flex; align-items: center;
            justify-content: space-around; padding: 0 15px; border-top: 1px solid rgba(255,255,255,0.05);
        }
        .nav-btn {
            width: 55px; height: 55px; border-radius: 18px; border: none;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; color: white; cursor: pointer; transition: 0.3s;
        }
        .btn-run { background: var(--accent-green); box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3); width: 75px; }
        .btn-analyze { background: var(--accent-purple); box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3); }
        .btn-trash { background: rgba(255,255,255,0.05); color: #94a3b8; }

        /* البطاقات المنبثقة */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85);
            z-index: 5000; display: none; align-items: center; justify-content: center; padding: 25px;
        }
        .modal-card {
            background: #1e293b; border: 1px solid var(--accent-purple);
            width: 100%; max-width: 400px; border-radius: 30px; padding: 25px;
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    </style>
</head>
<body onload="brython()">

    <canvas id="bg-canvas"></canvas>

    <div id="splash">
        <div class="splash-robot"><i class="fas fa-robot"></i></div>
        <div class="platform-name">تِقني AI</div>
        <div class="designer-tag">بواسطة أ. فيصل العريبي</div>
        <button class="start-btn" onclick="initApp()">دخول المنصة</button>
    </div>

    <div class="app-container" id="app">
        <header>
            <div class="logo-text"><i class="fas fa-terminal" style="color:var(--accent-green)"></i> تِقني LAB</div>
            <div style="font-size: 0.75rem; opacity: 0.6;">إصدار برو | أ. فيصل العريبي</div>
        </header>

        <div class="workspace">
            <textarea id="editor" spellcheck="false"># مرحباً بك في عالم البرمجة
print("أهلاً بك في منصة تِقني المطورة")</textarea>
            
            <div id="console">>>> جاهز لتشغيل التعليمات...</div>
        </div>

        <div id="helper-menu">
            <div class="menu-item" onclick="insertCode('print(\'Hello\')')"><i class="fas fa-print"></i> أمر الطباعة</div>
            <div class="menu-item" onclick="insertCode('if x > 5:')"><i class="fas fa-code-branch"></i> الجمل الشرطية</div>
            <div class="menu-item" onclick="insertCode('for i in range(5):')"><i class="fas fa-redo"></i> الحلقات التكرارية</div>
            <div class="menu-item" onclick="insertCode('import math')"><i class="fas fa-square-root-alt"></i> مكتبة الرياضيات</div>
        </div>

        <div id="ai-fab" onclick="toggleHelper()">
            <i class="fas fa-wand-magic-sparkles"></i>
        </div>

        <footer class="nav-bar">
            <button class="nav-btn btn-trash" onclick="clearCode()"><i class="fas fa-trash-alt"></i></button>
            <button class="nav-btn btn-run" onclick="runPyCode()"><i class="fas fa-play"></i></button>
            <button class="nav-btn btn-analyze" onclick="startAIAnalysis()"><i class="fas fa-brain"></i></button>
            <button class="nav-btn" style="background:#3b82f6" onclick="window.location.reload()"><i class="fas fa-home"></i></button>
        </footer>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal-card">
            <h3 style="color:var(--text-glow); margin-top:0;"><i class="fas fa-atom"></i> تحليل الذكاء الاصطناعي</h3>
            <div id="modal-text" style="color:#cbd5e1; line-height:1.6; margin-bottom:20px; font-size:0.9rem;"></div>
            <button onclick="closeModal()" style="width:100%; background:var(--accent-purple); color:white; border:none; padding:15px; border-radius:15px; font-weight:bold;">موافق، أكمل</button>
        </div>
    </div>

    <script type="text/python">
        from browser import document, window
        def run_it(ev=None):
            document["console"].text = ""
            def log(*args): document["console"].text += " ".join(map(str, args)) + "\n"
            try:
                exec(document["editor"].value, {"print": log, "input": window.prompt})
            except Exception as e:
                document["console"].text = f"خطأ برمي:\n{str(e)}"
        window.bryRun = run_it
    </script>

    <script>
        // إعداد خلفية النجوم
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let stars = [];
        
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            stars = Array(200).fill().map(() => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2,
                v: Math.random() * 0.5
            }));
        }

        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = 'white';
            stars.forEach(s => {
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
                ctx.fill();
                s.y += s.v;
                if(s.y > canvas.height) s.y = 0;
            });
            requestAnimationFrame(animate);
        }
        window.addEventListener('resize', resize);
        resize(); animate();

        // وظائف المنصة
        function initApp() {
            document.getElementById('splash').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('app').style.opacity = '1';
            }, 800);
        }

        function runPyCode() { window.bryRun(); }

        function toggleHelper() {
            const menu = document.getElementById('helper-menu');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        }

        function insertCode(code) {
            const ed = document.getElementById('editor');
            ed.value += "\n" + code;
            toggleHelper();
        }

        async function startAIAnalysis() {
            const modal = document.getElementById('modal');
            const text = document.getElementById('modal-text');
            modal.style.display = 'flex';
            text.innerHTML = "تِقني يقوم بفحص الأكواد الآن... <i class='fas fa-spinner fa-spin'></i>";
            
            try {
                const res = await fetch('https://text.pollinations.ai/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        messages: [{role: 'system', content: 'أنت تِقني، معلم حاسوب عماني خبير. حلل كود الطالب بوضوح وقدم له نصيحة تطويرية قصيرة.'}, {role: 'user', content: document.getElementById('editor').value}]
                    })
                });
                text.innerText = await res.text();
            } catch { text.innerText = "تعذر الاتصال بخادم الذكاء الاصطناعي."; }
        }

        function closeModal() { document.getElementById('modal').style.display = 'none'; }
        function clearCode() { if(confirm("مسح كافة العمل؟")) document.getElementById('editor').value = ""; }
    </script>
</body>
</html>
